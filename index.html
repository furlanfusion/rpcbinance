<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Conectar Carteira BSC</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    h1 {
      color: #333;
    }

    button {
      padding: 12px 24px;
      font-size: 16px;
      background-color: #f0b90b;
      color: #000;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #e5a600;
    }

    .log {
      margin-top: 20px;
      background: #fff;
      padding: 12px;
      border-radius: 8px;
      width: 80%;
      max-width: 600px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      font-family: monospace;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>Conectar √† Binance Smart Chain</h1>
  <button onclick="connectWallet()">üîó Conectar Carteira</button>
  <div class="log" id="log">Aguardando a√ß√£o...</div>

  <script>
    async function connectWallet() {
      const logEl = document.getElementById('log');

      if (typeof window.ethereum === 'undefined') {
        alert("MetaMask n√£o instalada!");
        return;
      }

      try {
        await window.ethereum.request({ method: 'eth_requestAccounts' })
          .catch((error) => {
            if (error.code === 4001) {
              alert('‚ùå Conex√£o rejeitada pelo usu√°rio.');
            } else {
              console.error(error);
            }
            throw error;
          });

        const accounts = await window.ethereum.request({ method: 'eth_accounts' });
        logEl.textContent = `‚úÖ Carteira conectada: ${accounts[0]}`;

        try {
          await window.ethereum.request({
            method: 'wallet_switchEthereumChain',
            params: [{ chainId: '0x38' }]
          });
          logEl.textContent += `\n‚úÖ Rede BSC ativa`;
        } catch (switchError) {
          if (switchError.code === 4902) {
            await window.ethereum.request({
              method: 'wallet_addEthereumChain',
              params: [{
                chainId: '0x38',
                chainName: 'Binance Smart Chain',
                nativeCurrency: {
                  name: 'BNB',
                  symbol: 'BNB',
                  decimals: 18
                },
                rpcUrls: ['https://virtual.binance.rpc.tenderly.co/36e9fd06-d366-4910-b643-65def87b8f69'],
                blockExplorerUrls: ['https://bscscan.com/']
              }]
            });
            logEl.textContent += `\n‚úÖ Rede BSC adicionada com RPC customizado`;
          } else {
            console.error(switchError);
            logEl.textContent += `\n‚ùå Erro ao trocar de rede: ${switchError.message}`;
          }
        }

        window.ethereum.on('accountsChanged', (accounts) => {
          logEl.textContent += `\nüë§ Conta alterada: ${accounts[0]}`;
        });

        window.ethereum.on('chainChanged', (chainId) => {
          logEl.textContent += `\nüîÅ Rede alterada: ${chainId}`;
          window.location.reload();
        });

      } catch (err) {
        console.error("Erro ao conectar:", err);
        logEl.textContent += `\n‚ùå Erro: ${err.message}`;
      }
    }
  </script>
</body>
</html>
